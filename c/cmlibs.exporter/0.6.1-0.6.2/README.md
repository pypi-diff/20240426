# Comparing `tmp/cmlibs.exporter-0.6.1-py3-none-any.whl.zip` & `tmp/cmlibs.exporter-0.6.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,19 +1,19 @@
-Zip file size: 18357 bytes, number of entries: 17
--rw-r--r--  2.0 unx      116 b- defN 24-Mar-13 02:51 cmlibs/__init__.py
--rw-r--r--  2.0 unx       22 b- defN 24-Mar-13 02:51 cmlibs/exporter/__init__.py
--rw-r--r--  2.0 unx     3136 b- defN 24-Mar-13 02:51 cmlibs/exporter/base.py
--rw-r--r--  2.0 unx     6491 b- defN 24-Mar-13 02:51 cmlibs/exporter/baseimage.py
--rw-r--r--  2.0 unx      280 b- defN 24-Mar-13 02:51 cmlibs/exporter/errors.py
--rw-r--r--  2.0 unx    11606 b- defN 24-Mar-13 02:51 cmlibs/exporter/flatmapsvg.py
--rw-r--r--  2.0 unx      890 b- defN 24-Mar-13 02:51 cmlibs/exporter/image.py
--rw-r--r--  2.0 unx     3096 b- defN 24-Mar-13 02:51 cmlibs/exporter/stl.py
--rw-r--r--  2.0 unx      936 b- defN 24-Mar-13 02:51 cmlibs/exporter/thumbnail.py
--rw-r--r--  2.0 unx     5852 b- defN 24-Mar-13 02:51 cmlibs/exporter/vtk.py
--rw-r--r--  2.0 unx     4061 b- defN 24-Mar-13 02:51 cmlibs/exporter/wavefront.py
--rw-r--r--  2.0 unx     6890 b- defN 24-Mar-13 02:51 cmlibs/exporter/webgl.py
--rw-r--r--  2.0 unx      594 b- defN 24-Mar-13 02:51 cmlibs.exporter-0.6.1.dist-info/LICENSE
--rw-r--r--  2.0 unx     2249 b- defN 24-Mar-13 02:51 cmlibs.exporter-0.6.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Mar-13 02:51 cmlibs.exporter-0.6.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        7 b- defN 24-Mar-13 02:51 cmlibs.exporter-0.6.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1401 b- defN 24-Mar-13 02:51 cmlibs.exporter-0.6.1.dist-info/RECORD
-17 files, 47719 bytes uncompressed, 16049 bytes compressed:  66.4%
+Zip file size: 19281 bytes, number of entries: 17
+-rw-r--r--  2.0 unx      116 b- defN 24-Apr-26 04:56 cmlibs/__init__.py
+-rw-r--r--  2.0 unx       22 b- defN 24-Apr-26 04:56 cmlibs/exporter/__init__.py
+-rw-r--r--  2.0 unx     3136 b- defN 24-Apr-26 04:56 cmlibs/exporter/base.py
+-rw-r--r--  2.0 unx     6491 b- defN 24-Apr-26 04:56 cmlibs/exporter/baseimage.py
+-rw-r--r--  2.0 unx      280 b- defN 24-Apr-26 04:56 cmlibs/exporter/errors.py
+-rw-r--r--  2.0 unx    11606 b- defN 24-Apr-26 04:56 cmlibs/exporter/flatmapsvg.py
+-rw-r--r--  2.0 unx      890 b- defN 24-Apr-26 04:56 cmlibs/exporter/image.py
+-rw-r--r--  2.0 unx     3096 b- defN 24-Apr-26 04:56 cmlibs/exporter/stl.py
+-rw-r--r--  2.0 unx      936 b- defN 24-Apr-26 04:56 cmlibs/exporter/thumbnail.py
+-rw-r--r--  2.0 unx     5852 b- defN 24-Apr-26 04:56 cmlibs/exporter/vtk.py
+-rw-r--r--  2.0 unx     4061 b- defN 24-Apr-26 04:56 cmlibs/exporter/wavefront.py
+-rw-r--r--  2.0 unx    10742 b- defN 24-Apr-26 04:56 cmlibs/exporter/webgl.py
+-rw-r--r--  2.0 unx      594 b- defN 24-Apr-26 04:56 cmlibs.exporter-0.6.2.dist-info/LICENSE
+-rw-r--r--  2.0 unx     2249 b- defN 24-Apr-26 04:56 cmlibs.exporter-0.6.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-26 04:56 cmlibs.exporter-0.6.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        7 b- defN 24-Apr-26 04:56 cmlibs.exporter-0.6.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1402 b- defN 24-Apr-26 04:56 cmlibs.exporter-0.6.2.dist-info/RECORD
+17 files, 51572 bytes uncompressed, 16973 bytes compressed:  67.1%
```

## zipnote {}

```diff
@@ -30,23 +30,23 @@
 
 Filename: cmlibs/exporter/wavefront.py
 Comment: 
 
 Filename: cmlibs/exporter/webgl.py
 Comment: 
 
-Filename: cmlibs.exporter-0.6.1.dist-info/LICENSE
+Filename: cmlibs.exporter-0.6.2.dist-info/LICENSE
 Comment: 
 
-Filename: cmlibs.exporter-0.6.1.dist-info/METADATA
+Filename: cmlibs.exporter-0.6.2.dist-info/METADATA
 Comment: 
 
-Filename: cmlibs.exporter-0.6.1.dist-info/WHEEL
+Filename: cmlibs.exporter-0.6.2.dist-info/WHEEL
 Comment: 
 
-Filename: cmlibs.exporter-0.6.1.dist-info/top_level.txt
+Filename: cmlibs.exporter-0.6.2.dist-info/top_level.txt
 Comment: 
 
-Filename: cmlibs.exporter-0.6.1.dist-info/RECORD
+Filename: cmlibs.exporter-0.6.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## cmlibs/exporter/__init__.py

```diff
@@ -1 +1 @@
-__version__ = "0.6.1"
+__version__ = "0.6.2"
```

## cmlibs/exporter/webgl.py

```diff
@@ -19,14 +19,16 @@
     def __init__(self, output_target=None, output_prefix=None):
         """
         :param output_target: The target directory to export the visualisation to.
         :param output_prefix: The prefix for the exported file(s).
         """
         super(ArgonSceneExporter, self).__init__("ArgonSceneExporterWebGL" if output_prefix is None else output_prefix)
         self._output_target = output_target
+        self._output_multiple_detail_levels = False
+        self._tessellation_level = None
 
     def export(self, output_target=None):
         """
         Export the current document to *output_target*. If no *output_target* is given then
         the *output_target* set at initialisation is used.
 
         If there is no current document then one will be loaded from the current filename.
@@ -34,37 +36,92 @@
         :param output_target: Output directory location.
         """
         super().export()
 
         if output_target is not None:
             self._output_target = output_target
 
+        if self._output_multiple_detail_levels:
+            initial_state = self._document.serialize()
+
+            self._set_tessellation("high")
+            self.export_webgl()
+            self._document.deserialize(initial_state)
+
+            self._set_tessellation("medium")
+            self.export_webgl()
+            self._document.deserialize(initial_state)
+
+            # For LOD the default URL level is low.
+            self._set_tessellation("low")
+            self.export_webgl()
+
+            # Set the document back to its initial state.
+            self._document.deserialize(initial_state)
+        else:
+            self.export_webgl()
+
         self.export_view()
-        self.export_webgl()
 
     def export_view(self):
         """Export sceneviewer parameters to JSON format"""
         view_manager = self._document.getViewManager()
         views = view_manager.getViews()
         for view in views:
             name = view.getName()
             scenes = view.getScenes()
             if len(scenes) == 1:
                 scene_description = scenes[0]["Sceneviewer"].serialize()
-                viewData = {'farPlane': scene_description['FarClippingPlane'], 'nearPlane': scene_description['NearClippingPlane'],
-                            'eyePosition': scene_description['EyePosition'], 'targetPosition': scene_description['LookatPosition'],
+                viewData = {'farPlane': scene_description['FarClippingPlane'],
+                            'nearPlane': scene_description['NearClippingPlane'],
+                            'eyePosition': scene_description['EyePosition'],
+                            'targetPosition': scene_description['LookatPosition'],
                             'upVector': scene_description['UpVector'], 'viewAngle': scene_description['ViewAngle']}
 
                 view_file = self._form_full_filename(self._view_filename(name))
                 with open(view_file, 'w') as f:
                     json.dump(viewData, f)
 
     def _view_filename(self, name):
         return f"{self._prefix}_{name}_view.json"
 
+    def setLoD(self, state):
+        self._output_multiple_detail_levels = state
+
+    def _set_tessellation(self, tessellation_level):
+        """
+        Set tessellation based on the current tessellation level.
+        """
+        self._tessellation_level = tessellation_level
+        state = self._document.serialize()
+        document_content = json.loads(state)
+
+        used_tessellations = _tessellations_in_use(document_content["RootRegion"])
+        for used_tessellation in used_tessellations:
+            matched_tessellations = [t for t in document_content["Tessellations"]["Tessellations"] if t["Name"] == used_tessellation]
+            if len(matched_tessellations) == 1:
+                _re_level_tessellation(tessellation_level, matched_tessellations[0])
+
+        self._document.deserialize(json.dumps(document_content))
+
+    def _define_default_LOD_obj(self, url):
+        index = url.split("_")[-1]
+        LOD_obj = {
+            "Preload": False,
+            "Levels": {
+                "medium": {
+                    "URL": f"{self._prefix}_medium_{index}"
+                },
+                "close": {
+                    "URL": f"{self._prefix}_high_{index}"
+                }
+            }
+        }
+        return LOD_obj
+
     def _define_default_view_obj(self):
         view_obj = {}
         view_manager = self._document.getViewManager()
         view_name = view_manager.getActiveView()
         if view_name is not None:
             view_obj = {
                 "Type": "View",
@@ -101,40 +158,47 @@
 
         :param scene: The Zinc Scene object to be exported.
         :param scene_filter: Optional; A Zinc Scenefilter object associated with the Zinc scene, allowing the user to filter which
             graphics are included in the export.
         """
         sceneSR = scene.createStreaminformationScene()
         sceneSR.setIOFormat(sceneSR.IO_FORMAT_THREEJS)
+
+        # Set time-related parameters if specified
         if not (self._initialTime is None or self._finishTime is None):
             sceneSR.setNumberOfTimeSteps(self._numberOfTimeSteps)
             sceneSR.setInitialTime(self._initialTime)
             sceneSR.setFinishTime(self._finishTime)
             """ We want the geometries and colours change overtime """
             sceneSR.setOutputTimeDependentVertices(1)
             sceneSR.setOutputTimeDependentColours(1)
 
         # Optionally filter the scene.
         if scene_filter:
             sceneSR.setScenefilter(scene_filter)
 
+        # Check if any resources are required
         number = sceneSR.getNumberOfResourcesRequired()
         if number == 0:
             return
 
         resources = []
         """Write out each graphics into a json file which can be rendered with ZincJS"""
         for i in range(number):
             resources.append(sceneSR.createStreamresourceMemory())
 
         scene.write(sceneSR)
 
+        # Calculate number of digits for resource filenames
         number_of_digits = math.floor(math.log10(number)) + 1
 
-        def _resource_filename(prefix, i_):
+        # Define resource filename based on prefix and index
+        def _resource_filename(prefix, i_, tessellation_level=None):
+            if self._output_multiple_detail_levels and tessellation_level != "low":
+                return f'{prefix}_{tessellation_level}_{str(i_).zfill(number_of_digits)}.json'
             return f'{prefix}_{str(i_).zfill(number_of_digits)}.json'
 
         """Write out each resource into their own file"""
         resource_count = 0
         for i in range(number):
             result, buffer = resources[i].getBuffer()
             if result != ZINC_OK:
@@ -144,42 +208,79 @@
             if buffer is None:
                 # Maybe this is a bug in the resource counting.
                 continue
 
             buffer = buffer.decode()
 
             if i == 0:
+                # Replace memory_resource_# with corresponding filenames
                 for j in range(number - 1):
                     """
                     IMPORTANT: the replace name here is relative to your html page, so adjust it
                     accordingly.
                     """
-                    replaceName = f'"{_resource_filename(self._prefix, j + 1)}"'
+                    replaceName = f'"{_resource_filename(self._prefix, j + 1, self._tessellation_level)}"'
                     old_name = '"memory_resource_' + str(j + 2) + '"'
                     buffer = buffer.replace(old_name, replaceName, 1)
 
+                # Add default view object and settings object
                 view_obj = self._define_default_view_obj() if self._document else None
-
                 settings_obj = self._define_settings_obj()
 
                 obj = json.loads(buffer)
                 if obj is None:
                     raise ExportWebGLError('There is nothing to export')
 
+                for o in obj:
+                    # Add Level of Detail (LOD) object if necessary
+                    LOD_obj = self._define_default_LOD_obj(
+                        o["URL"]) if self._document and self._output_multiple_detail_levels else None
+                    if LOD_obj:
+                        o['LOD'] = LOD_obj
+
                 obj.append(view_obj)
                 if settings_obj is not None:
                     obj.append(settings_obj)
 
                 buffer = json.dumps(obj)
 
+            # Write buffer content to metadata file
             if i == 0:
                 current_file = self.metadata_file()
             else:
-                current_file = self._form_full_filename(_resource_filename(self._prefix, resource_count))
+                current_file = self._form_full_filename(
+                    _resource_filename(self._prefix, resource_count, self._tessellation_level))
 
             with open(current_file, 'w') as f:
                 f.write(buffer)
 
             resource_count += 1
 
     def metadata_file(self):
         return self._form_full_filename(self._prefix + '_metadata.json')
+
+
+def _reduce_to_level(level, value):
+    divisor = 4
+    if level == "high":
+        divisor = 1
+    elif level == "medium":
+        divisor = 2
+
+    return max(math.floor(value / divisor), 1)
+
+
+def _re_level_tessellation(level, tessellation):
+    tessellation["CircleDivisions"] = _reduce_to_level(level, tessellation["CircleDivisions"])
+    tessellation["RefinementFactors"] = [_reduce_to_level(level, v) for v in tessellation["RefinementFactors"]]
+
+
+def _tessellations_in_use(region):
+    used_tessellations = []
+    if "Scene" in region:
+        for g in region["Scene"].get("Graphics", []):
+            used_tessellations.append(g["Tessellation"])
+
+    for child_region in region.get("ChildRegions", []):
+        used_tessellations.extend(_tessellations_in_use(child_region))
+
+    return used_tessellations
```

## Comparing `cmlibs.exporter-0.6.1.dist-info/LICENSE` & `cmlibs.exporter-0.6.2.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `cmlibs.exporter-0.6.1.dist-info/METADATA` & `cmlibs.exporter-0.6.2.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cmlibs.exporter
-Version: 0.6.1
+Version: 0.6.2
 Summary: CMLibs Export functions.
 Home-page: https://github.com/CMLibs-Bindings/cmlibs.exporter
 Author: Hugh Sorby
 Author-email: h.sorby@auckland.ac.nz
 License: Apache Software License
 Description-Content-Type: text/x-rst
 License-File: LICENSE
```

## Comparing `cmlibs.exporter-0.6.1.dist-info/RECORD` & `cmlibs.exporter-0.6.2.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 cmlibs/__init__.py,sha256=Q-n92IAnQHbAoMUgpmzzYflDet5gHBvDRuqnXSz2NRQ,116
-cmlibs/exporter/__init__.py,sha256=baAcEjLSYFIeNZF51tOMmA_zAMhN8HvKael-UU-Ruec,22
+cmlibs/exporter/__init__.py,sha256=jFlbxEJFS0G44LE-yXXVSwXACA1J_NyYDk5E20_2zpc,22
 cmlibs/exporter/base.py,sha256=iAehYTyfrTbZiMCZA9wvQEMbH8451OKeWAIXpWSEmSY,3136
 cmlibs/exporter/baseimage.py,sha256=z4e-4E1bM5gbnJPGwbHQX4y1whCyUVd6hUsq6eJQp6A,6491
 cmlibs/exporter/errors.py,sha256=gKsO9GU2RaPPmFhRxicq-29c83YF9StOBFKVahfRSLI,280
 cmlibs/exporter/flatmapsvg.py,sha256=qJE2ljg4YSc3HiRAtdy-HReqpnjZyZePm6n9vAu2Y9k,11606
 cmlibs/exporter/image.py,sha256=0QznQJ0JArILs2iHJ2OOVAr9htcQJyI0S7tq3YwArFY,890
 cmlibs/exporter/stl.py,sha256=bFGOlPV7CQucgMj7h1TfDG3QaxrNsjA6_IuPe4pb8Qc,3096
 cmlibs/exporter/thumbnail.py,sha256=0foU8bPky-GCc1rm8gfEUp8qJnQVfwE9UmFcVzx0hXo,936
 cmlibs/exporter/vtk.py,sha256=MaulpQhdh77-WZikvGQuVy-gMt4uFm-jfSq9Z0fjVOY,5852
 cmlibs/exporter/wavefront.py,sha256=CM_jpx9JzlYa99jSTmBPjNWByKH1qUyZLBp_B7mwx5c,4061
-cmlibs/exporter/webgl.py,sha256=VjXLxjrhyZWnwHKmp1qCaFIY1XaxXnAWSZO4f6NeJ5g,6890
-cmlibs.exporter-0.6.1.dist-info/LICENSE,sha256=ZFrXRJukIMNrsL7C3WxZriJX2KMCmbx9XrTq32yAUpY,594
-cmlibs.exporter-0.6.1.dist-info/METADATA,sha256=lgNyIdBuTRz9ImL5N9l7C-dWHxC_ZpBoSK-uvwj9BIA,2249
-cmlibs.exporter-0.6.1.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-cmlibs.exporter-0.6.1.dist-info/top_level.txt,sha256=oCGdRPtMmZQPwkmToWquAQLTi3Uxt7jMgc6uylFo7lg,7
-cmlibs.exporter-0.6.1.dist-info/RECORD,,
+cmlibs/exporter/webgl.py,sha256=3d_T7EOR55LlMfgtXoCW4bA7SAnwuQfUqIF0RObkZt8,10742
+cmlibs.exporter-0.6.2.dist-info/LICENSE,sha256=ZFrXRJukIMNrsL7C3WxZriJX2KMCmbx9XrTq32yAUpY,594
+cmlibs.exporter-0.6.2.dist-info/METADATA,sha256=Rd_TMrBdabsgbkP_KhIeSUL9r7sy55qW9q4jxkkRCXY,2249
+cmlibs.exporter-0.6.2.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+cmlibs.exporter-0.6.2.dist-info/top_level.txt,sha256=oCGdRPtMmZQPwkmToWquAQLTi3Uxt7jMgc6uylFo7lg,7
+cmlibs.exporter-0.6.2.dist-info/RECORD,,
```

