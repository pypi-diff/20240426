# Comparing `tmp/odoo_addon_fs_file-16.0.1.0.6.1-py3-none-any.whl.zip` & `tmp/odoo_addon_fs_file-17.0.1.0.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,26 +1,26 @@
-Zip file size: 39676 bytes, number of entries: 24
--rw-r--r--  2.0 unx     9583 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/README.rst
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/__init__.py
--rw-r--r--  2.0 unx      604 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/__manifest__.py
--rw-r--r--  2.0 unx    16536 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/fields.py
--rw-r--r--  2.0 unx     1042 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/i18n/es.po
--rw-r--r--  2.0 unx      957 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/i18n/fs_file.pot
--rw-r--r--  2.0 unx     1044 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/i18n/it.po
--rw-r--r--  2.0 unx      120 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      319 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     2615 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/readme/HISTORY.rst
--rw-r--r--  2.0 unx     3381 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/readme/USAGE.rst
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/readme/newsfragments/.gitignore
--rw-r--r--  2.0 unx     9455 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/static/description/icon.png
--rw-r--r--  2.0 unx    29722 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/static/description/index.html
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/static/src/scss/fsfile_field.scss
--rw-r--r--  2.0 unx     2148 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/static/src/views/fields/fsfile_field.esm.js
--rw-r--r--  2.0 unx     2009 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/static/src/views/fields/fsfile_field.xml
--rw-r--r--  2.0 unx       27 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/tests/__init__.py
--rw-r--r--  2.0 unx      288 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/tests/models.py
--rw-r--r--  2.0 unx     8063 b- defN 24-Apr-20 07:04 odoo/addons/fs_file/tests/test_fs_file.py
--rw-r--r--  2.0 unx    10232 b- defN 24-Apr-20 07:04 odoo_addon_fs_file-16.0.1.0.6.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-20 07:04 odoo_addon_fs_file-16.0.1.0.6.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-Apr-20 07:04 odoo_addon_fs_file-16.0.1.0.6.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2312 b- defN 24-Apr-20 07:04 odoo_addon_fs_file-16.0.1.0.6.1.dist-info/RECORD
-24 files, 100554 bytes uncompressed, 35798 bytes compressed:  64.4%
+Zip file size: 39642 bytes, number of entries: 24
+-rw-r--r--  2.0 unx     9779 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/README.rst
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/__init__.py
+-rw-r--r--  2.0 unx      604 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/__manifest__.py
+-rw-r--r--  2.0 unx    16420 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/fields.py
+-rw-r--r--  2.0 unx     1042 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/i18n/es.po
+-rw-r--r--  2.0 unx      934 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/i18n/fs_file.pot
+-rw-r--r--  2.0 unx     1044 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/i18n/it.po
+-rw-r--r--  2.0 unx      180 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/readme/CONTRIBUTORS.md
+-rw-r--r--  2.0 unx      317 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/readme/DESCRIPTION.md
+-rw-r--r--  2.0 unx     2521 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/readme/HISTORY.md
+-rw-r--r--  2.0 unx     3240 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/readme/USAGE.md
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/readme/newsfragments/.gitignore
+-rw-r--r--  2.0 unx     9455 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/static/description/icon.png
+-rw-r--r--  2.0 unx    29878 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/static/description/index.html
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/static/src/scss/fsfile_field.scss
+-rw-r--r--  2.0 unx     1540 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/static/src/views/fields/fsfile_field.esm.js
+-rw-r--r--  2.0 unx     2687 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/static/src/views/fields/fsfile_field.xml
+-rw-r--r--  2.0 unx       27 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/tests/__init__.py
+-rw-r--r--  2.0 unx      287 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/tests/models.py
+-rw-r--r--  2.0 unx     8063 b- defN 24-Apr-25 12:35 odoo/addons/fs_file/tests/test_fs_file.py
+-rw-r--r--  2.0 unx    10406 b- defN 24-Apr-25 12:35 odoo_addon_fs_file-17.0.1.0.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       83 b- defN 24-Apr-25 12:35 odoo_addon_fs_file-17.0.1.0.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        4 b- defN 24-Apr-25 12:35 odoo_addon_fs_file-17.0.1.0.0.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2308 b- defN 24-Apr-25 12:35 odoo_addon_fs_file-17.0.1.0.0.2.dist-info/RECORD
+24 files, 100819 bytes uncompressed, 35772 bytes compressed:  64.5%
```

## zipnote {}

```diff
@@ -15,24 +15,24 @@
 
 Filename: odoo/addons/fs_file/i18n/fs_file.pot
 Comment: 
 
 Filename: odoo/addons/fs_file/i18n/it.po
 Comment: 
 
-Filename: odoo/addons/fs_file/readme/CONTRIBUTORS.rst
+Filename: odoo/addons/fs_file/readme/CONTRIBUTORS.md
 Comment: 
 
-Filename: odoo/addons/fs_file/readme/DESCRIPTION.rst
+Filename: odoo/addons/fs_file/readme/DESCRIPTION.md
 Comment: 
 
-Filename: odoo/addons/fs_file/readme/HISTORY.rst
+Filename: odoo/addons/fs_file/readme/HISTORY.md
 Comment: 
 
-Filename: odoo/addons/fs_file/readme/USAGE.rst
+Filename: odoo/addons/fs_file/readme/USAGE.md
 Comment: 
 
 Filename: odoo/addons/fs_file/readme/newsfragments/.gitignore
 Comment: 
 
 Filename: odoo/addons/fs_file/static/description/icon.png
 Comment: 
@@ -54,20 +54,20 @@
 
 Filename: odoo/addons/fs_file/tests/models.py
 Comment: 
 
 Filename: odoo/addons/fs_file/tests/test_fs_file.py
 Comment: 
 
-Filename: odoo_addon_fs_file-16.0.1.0.6.1.dist-info/METADATA
+Filename: odoo_addon_fs_file-17.0.1.0.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_fs_file-16.0.1.0.6.1.dist-info/WHEEL
+Filename: odoo_addon_fs_file-17.0.1.0.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_fs_file-16.0.1.0.6.1.dist-info/top_level.txt
+Filename: odoo_addon_fs_file-17.0.1.0.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_fs_file-16.0.1.0.6.1.dist-info/RECORD
+Filename: odoo_addon_fs_file-17.0.1.0.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/fs_file/README.rst

```diff
@@ -3,39 +3,40 @@
 =======
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:cec7431f1becb99516793e51833fe9606ccd7459d148d15df61b03c14de1f6e4
+   !! source digest: sha256:1e4d767972e6eb4be41e096d5cdff0f0ba49274b1caa6121c9eaeb7dfc54b091
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Alpha-red.png
     :target: https://odoo-community.org/page/development-status
     :alt: Alpha
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fstorage-lightgray.png?logo=github
-    :target: https://github.com/OCA/storage/tree/16.0/fs_file
+    :target: https://github.com/OCA/storage/tree/17.0/fs_file
     :alt: OCA/storage
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/storage-16-0/storage-16-0-fs_file
+    :target: https://translation.odoo-community.org/projects/storage-17-0/storage-17-0-fs_file
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/storage&target_branch=16.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/storage&target_branch=17.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
-This addon defines a new field type `FSFile` which is a file field that stores
-a file in an external filesystem instead of the odoo's filestore. This is useful for
-large files that you don't want to store in the filestore. Moreover, the field
-value provides you an interface to access the file's contents and metadata.
+This addon defines a new field type FSFile which is a file field that
+stores a file in an external filesystem instead of the odoo's filestore.
+This is useful for large files that you don't want to store in the
+filestore. Moreover, the field value provides you an interface to access
+the file's contents and metadata.
 
 .. IMPORTANT::
    This is an alpha version, the data model and design can change at any time without warning.
    Only for development or testing purpose, do not use in production.
    `More details on development status <https://odoo-community.org/page/development-status>`_
 
 **Table of contents**
@@ -46,213 +47,222 @@
 Usage
 =====
 
 The new field **FSFile** has been developed to allows you to store files
 in an external filesystem storage. Its design is based on the following
 principles:
 
-* The content of the file must be read from the filesystem only when
-  needed.
-* It must be possible to manipulate the file content as a stream by default.
-* Unlike Odoo's Binary field, the content is the raw file content by default
-  (no base64 encoding).
-* To allows to exchange the file content with other systems, writing the
-  content as base64 is possible. The read operation will return a json
-  structure with the filename, the mimetype, the size and a url to download the file.
+-  The content of the file must be read from the filesystem only when
+   needed.
+-  It must be possible to manipulate the file content as a stream by
+   default.
+-  Unlike Odoo's Binary field, the content is the raw file content by
+   default (no base64 encoding).
+-  To allows to exchange the file content with other systems, writing
+   the content as base64 is possible. The read operation will return a
+   json structure with the filename, the mimetype, the size and a url to
+   download the file.
 
 This design allows to minimize the memory consumption of the server when
 manipulating large files and exchanging them with other systems through
 the default jsonrpc interface.
 
 Concretely, this design allows you to write code like this:
 
-.. code-block:: python
+.. code:: python
 
-  from IO import BytesIO
-  from odoo import models, fields
-  from odoo.addons.fs_file.fields import FSFile
-
-  class MyModel(models.Model):
-      _name = 'my.model'
-
-      name = fields.Char()
-      file = FSFile()
-
-  # Create a new record with a raw content
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': BytesIO(b"content"),
-  })
-
-  assert(my_model.file.read() == b"content")
-
-  # Create a new record with a base64 encoded content
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': b"content".encode('base64'),
-  })
-  assert(my_model.file.read() == b"content")
-
-  # Create a new record with a file content
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': open('my_file.txt', 'rb'),
-  })
-  assert(my_model.file.read() == b"content")
-  assert(my_model.file.name == "my_file.txt")
-
-  # create a record with a file content as base64 encoded and a filename
-  # This method is useful to create a record from a file uploaded
-  # through the web interface.
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': {
-          'filename': 'my_file.txt',
-          'content': base64.b64encode(b"content"),
-      },
-  })
-  assert(my_model.file.read() == b"content")
-  assert(my_model.file.name == "my_file.txt")
-
-  # write the content of the file as base64 encoded and a filename
-  # This method is useful to update a record from a file uploaded
-  # through the web interface.
-  my_model.write({
-      'file': {
-          'name': 'my_file.txt',
-          'file': base64.b64encode(b"content"),
-      },
-  })
-
-  # the call to read() will return a json structure with the filename,
-  # the mimetype, the size and a url to download the file.
-  info = my_model.file.read()
-  assert(info["file"] == {
-      "filename": "my_file.txt",
-      "mimetype": "text/plain",
-      "size": 7,
-      "url": "/web/content/1234/my_file.txt",
-  })
-
-  # use the field as a file stream
-  # In such a case, the content is read from the filesystem without being
-  # stored in memory.
-  with my_model.file.open("rb) as f:
-    assert(f.read() == b"content")
-
-  # use the field as a file stream to write the content
-  # In such a case, the content is written to the filesystem without being
-  # stored in memory. This kind of approach is useful to manipulate large
-  # files and to avoid to use too much memory.
-  # Transactional behaviour is ensured by the implementation!
-  with my_model.file.open("wb") as f:
-      f.write(b"content")
+   from IO import BytesIO
+   from odoo import models, fields
+   from odoo.addons.fs_file.fields import FSFile
+
+   class MyModel(models.Model):
+       _name = 'my.model'
+
+       name = fields.Char()
+       file = FSFile()
+
+   # Create a new record with a raw content
+   my_model = MyModel.create({
+       'name': 'My File',
+       'file': BytesIO(b"content"),
+   })
+
+   assert(my_model.file.read() == b"content")
+
+   # Create a new record with a base64 encoded content
+   my_model = MyModel.create({
+       'name': 'My File',
+       'file': b"content".encode('base64'),
+   })
+   assert(my_model.file.read() == b"content")
+
+   # Create a new record with a file content
+   my_model = MyModel.create({
+       'name': 'My File',
+       'file': open('my_file.txt', 'rb'),
+   })
+   assert(my_model.file.read() == b"content")
+   assert(my_model.file.name == "my_file.txt")
+
+   # create a record with a file content as base64 encoded and a filename
+   # This method is useful to create a record from a file uploaded
+   # through the web interface.
+   my_model = MyModel.create({
+       'name': 'My File',
+       'file': {
+           'filename': 'my_file.txt',
+           'content': base64.b64encode(b"content"),
+       },
+   })
+   assert(my_model.file.read() == b"content")
+   assert(my_model.file.name == "my_file.txt")
+
+   # write the content of the file as base64 encoded and a filename
+   # This method is useful to update a record from a file uploaded
+   # through the web interface.
+   my_model.write({
+       'file': {
+           'name': 'my_file.txt',
+           'file': base64.b64encode(b"content"),
+       },
+   })
+
+   # the call to read() will return a json structure with the filename,
+   # the mimetype, the size and a url to download the file.
+   info = my_model.file.read()
+   assert(info["file"] == {
+       "filename": "my_file.txt",
+       "mimetype": "text/plain",
+       "size": 7,
+       "url": "/web/content/1234/my_file.txt",
+   })
+
+   # use the field as a file stream
+   # In such a case, the content is read from the filesystem without being
+   # stored in memory.
+   with my_model.file.open("rb) as f:
+     assert(f.read() == b"content")
+
+   # use the field as a file stream to write the content
+   # In such a case, the content is written to the filesystem without being
+   # stored in memory. This kind of approach is useful to manipulate large
+   # files and to avoid to use too much memory.
+   # Transactional behaviour is ensured by the implementation!
+   with my_model.file.open("wb") as f:
+       f.write(b"content")
 
 Changelog
 =========
 
 16.0.1.0.6 (2024-02-23)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Bugfixes**
 
-- Fixes the creation of empty files.
-
-  Before this change, the creation of empty files resulted in a constraint
-  violation error. This was due to the fact that even if a name was given
-  to the file it was not preserved into the FSFileValue object if no content
-  was given. As result, when the corresponding ir.attachment was created in
-  the database, the name was not set and the 'required' constraint was violated. (`#341 <https://github.com/OCA/storage/issues/341>`_)
+-  Fixes the creation of empty files.
 
+   Before this change, the creation of empty files resulted in a
+   constraint violation error. This was due to the fact that even if a
+   name was given to the file it was not preserved into the FSFileValue
+   object if no content was given. As result, when the corresponding
+   ir.attachment was created in the database, the name was not set and
+   the 'required' constraint was violated.
+   (`#341 <https://github.com/OCA/storage/issues/341>`__)
 
 16.0.1.0.5 (2023-11-30)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Bugfixes**
 
-- Ensure the cache is properly set when a new value is assigned to a FSFile field.
-  If the field is stored the value to the cache must be a FSFileValue object
-  linked to the attachment record used to store the file. Otherwise the value
-  must be one given since it could be the result of a compute method. (`#290 <https://github.com/OCA/storage/issues/290>`_)
-
+-  Ensure the cache is properly set when a new value is assigned to a
+   FSFile field. If the field is stored the value to the cache must be a
+   FSFileValue object linked to the attachment record used to store the
+   file. Otherwise the value must be one given since it could be the
+   result of a compute method.
+   (`#290 <https://github.com/OCA/storage/issues/290>`__)
 
 16.0.1.0.4 (2023-10-17)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Bugfixes**
 
-- Browse attachment with sudo() to avoid read access errors
-
-  In models that have a multi fs image relation, a new line
-  in form will trigger onchanges and will call the fs.file model
-  'convert_to_cache()' method that will try to browse the attachment
-  with user profile that could have no read rights on attachment model. (`#288 <https://github.com/OCA/storage/issues/288>`_)
+-  Browse attachment with sudo() to avoid read access errors
 
+   In models that have a multi fs image relation, a new line in form
+   will trigger onchanges and will call the fs.file model
+   'convert_to_cache()' method that will try to browse the attachment
+   with user profile that could have no read rights on attachment model.
+   (`#288 <https://github.com/OCA/storage/issues/288>`__)
 
 16.0.1.0.3 (2023-10-05)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Bugfixes**
 
-- Fix the *mimetype* property on *FSFileValue* objects.
+-  Fix the *mimetype* property on *FSFileValue* objects.
 
-  The *mimetype* value is computed as follow:
-
-  * If an attachment is set, the mimetype is taken from the attachment.
-  * If no attachment is set, the mimetype is guessed from the name of the file.
-  * If the mimetype cannot be guessed from the name, the mimetype is guessed from
-    the content of the file. (`#284 <https://github.com/OCA/storage/issues/284>`_)
+   The *mimetype* value is computed as follow:
 
+   -  If an attachment is set, the mimetype is taken from the
+      attachment.
+   -  If no attachment is set, the mimetype is guessed from the name of
+      the file.
+   -  If the mimetype cannot be guessed from the name, the mimetype is
+      guessed from the content of the file.
+      (`#284 <https://github.com/OCA/storage/issues/284>`__)
 
 16.0.1.0.1 (2023-09-29)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Features**
 
-- Add a *url_path* property on the *FSFileValue* object. This property
-  allows you to easily get access to the relative path of the file on
-  the filesystem. This value is only available if the filesystem storage
-  is configured with a *Base URL* value. (`#281 <https://github.com/OCA/storage/issues/281>`__)
-
+-  Add a *url_path* property on the *FSFileValue* object. This property
+   allows you to easily get access to the relative path of the file on
+   the filesystem. This value is only available if the filesystem
+   storage is configured with a *Base URL* value.
+   (`#281 <https://github.com/OCA/storage/issues/281>`__)
 
 **Bugfixes**
 
-- The *url_path*, *url* and *internal_url* properties on the *FSFileValue*
-  object return *None* if the information is not available (instead of *False*).
-
-  The *url* property on the *FSFileValue* object returns the filesystem url nor
-  the url field of the attachment. (`#281 <https://github.com/OCA/storage/issues/281>`__)
+-  The *url_path*, *url* and *internal_url* properties on the
+   *FSFileValue* object return *None* if the information is not
+   available (instead of *False*).
+
+   The *url* property on the *FSFileValue* object returns the filesystem
+   url nor the url field of the attachment.
+   (`#281 <https://github.com/OCA/storage/issues/281>`__)
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/storage/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/storage/issues/new?body=module:%20fs_file%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/storage/issues/new?body=module:%20fs_file%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
-~~~~~~~
+-------
 
 * ACSONE SA/NV
 
 Contributors
-~~~~~~~~~~~~
+------------
 
-Laurent Mignon <laurent.mignon@acsone.eu>
-Marie Lejeune <marie.lejeune@acsone.eu>
-Hugues Damry <hughes.damry@acsone.eu>
+-  Laurent Mignon <laurent.mignon@acsone.eu>
+-  Marie Lejeune <marie.lejeune@acsone.eu>
+-  Hugues Damry <hughes.damry@acsone.eu>
+-  Nguyen Minh Chien <chien@trobz.com>
 
 Maintainers
-~~~~~~~~~~~
+-----------
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
@@ -264,10 +274,10 @@
     :target: https://github.com/lmignon
     :alt: lmignon
 
 Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-lmignon| 
 
-This module is part of the `OCA/storage <https://github.com/OCA/storage/tree/16.0/fs_file>`_ project on GitHub.
+This module is part of the `OCA/storage <https://github.com/OCA/storage/tree/17.0/fs_file>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/fs_file/__manifest__.py

```diff
@@ -1,15 +1,15 @@
 # Copyright 2023 ACSONE SA/NV
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "Fs File",
     "summary": """
         Field to store files into filesystem storages""",
-    "version": "16.0.1.0.6",
+    "version": "17.0.1.0.0",
     "license": "AGPL-3",
     "author": "ACSONE SA/NV,Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/storage",
     "depends": ["fs_attachment"],
     "data": [],
     "demo": [],
     "maintainers": ["lmignon"],
```

## odoo/addons/fs_file/fields.py

```diff
@@ -184,15 +184,15 @@
     def open(
         self,
         mode="rb",
         block_size=None,
         cache_options=None,
         compression=None,
         new_version=True,
-        **kwargs
+        **kwargs,
     ) -> IOBase:
         """
         Return a file-like object that can be used to read and write the file content.
         See the documentation of open() into the ir.attachment model from the
         fs_attachment module for more information.
         """
         if not self._attachment:
@@ -273,27 +273,25 @@
             for att in records.env["ir.attachment"].sudo().search(domain)
         }
         records.env.cache.insert_missing(records, self, map(data.get, records._ids))
 
     def create(self, record_values):
         if not record_values:
             return
-        env = record_values[0][0].env
-        with env.norecompute():
-            for record, value in record_values:
-                if value:
-                    cache_value = self.convert_to_cache(value, record)
-                    attachment = self._create_attachment(record, cache_value)
-                    cache_value = self._convert_attachment_to_cache(attachment)
-                    record.env.cache.update(
-                        record,
-                        self,
-                        [cache_value],
-                        dirty=False,
-                    )
+        for record, value in record_values:
+            if value:
+                cache_value = self.convert_to_cache(value, record)
+                attachment = self._create_attachment(record, cache_value)
+                cache_value = self._convert_attachment_to_cache(attachment)
+                record.env.cache.update(
+                    record,
+                    self,
+                    [cache_value],
+                    dirty=False,
+                )
 
     def _create_attachment(self, record, cache_value: FSFileValue):
         ir_attachment = (
             record.env["ir.attachment"]
             .sudo()
             .with_context(
                 binary_field_real_user=record.env.user,
@@ -365,15 +363,15 @@
                 atts.write({"raw": content, "name": filename})
                 atts_records = records.browse(atts.mapped("res_id"))
                 # set new value in the cache since we have the reference to the
                 # attachment record and a new access to the field will nomore
                 # require to load the attachment record
                 for record in atts_records:
                     new_cache_value = self._convert_attachment_to_cache(
-                        atts.filtered(lambda att: att.res_id == record.id)
+                        atts.filtered(lambda att, rec=record: att.res_id == rec.id)
                     )
                     cache.update(record, self, [new_cache_value], dirty=False)
                 # create the missing attachments
                 missing = real_records - atts_records
                 if missing:
                     created = atts.browse()
                     for record in missing:
@@ -416,16 +414,16 @@
                 name = self._get_filename(record)
             return FSFileValue(name=name, value=value)
         if isinstance(value, bytes):
             return FSFileValue(
                 name=self._get_filename(record), value=base64.b64decode(value)
             )
         raise ValueError(
-            "Invalid value for %s: %r\n"
-            "Should be base64 encoded bytes or a file-like object" % (self, value)
+            f"Invalid value for {self}: {value}\n"
+            "Should be base64 encoded bytes or a file-like object"
         )
 
     def convert_to_write(self, value, record):
         return self.convert_to_cache(value, record)
 
     def convert_to_read(self, value, record, use_name_get=True):
         if value is None or value is False:
@@ -438,10 +436,10 @@
             }
             if value.attachment:
                 res["url"] = value.internal_url
             else:
                 res["content"] = base64.b64encode(value.getvalue()).decode("ascii")
             return res
         raise ValueError(
-            "Invalid value for %s: %r\n"
-            "Should be base64 encoded bytes or a file-like object" % (self, value)
+            f"Invalid value for {self}: {value}\n"
+            "Should be base64 encoded bytes or a file-like object"
         )
```

## odoo/addons/fs_file/i18n/fs_file.pot

```diff
@@ -1,14 +1,14 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* fs_file
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 16.0\n"
+"Project-Id-Version: Odoo Server 17.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
@@ -19,19 +19,19 @@
 #: code:addons/fs_file/static/src/views/fields/fsfile_field.xml:0
 #, python-format
 msgid "Clear"
 msgstr ""
 
 #. module: fs_file
 #. odoo-javascript
-#: code:addons/fs_file/static/src/views/fields/fsfile_field.esm.js:0
+#: code:addons/fs_file/static/src/views/fields/fsfile_field.xml:0
+#: code:addons/fs_file/static/src/views/fields/fsfile_field.xml:0
 #, python-format
-msgid "Could not display the selected image"
+msgid "Edit"
 msgstr ""
 
 #. module: fs_file
 #. odoo-javascript
 #: code:addons/fs_file/static/src/views/fields/fsfile_field.xml:0
-#: code:addons/fs_file/static/src/views/fields/fsfile_field.xml:0
 #, python-format
-msgid "Edit"
+msgid "Upload your file"
 msgstr ""
```

## odoo/addons/fs_file/static/description/index.html

```diff
@@ -362,21 +362,22 @@
 <div class="document" id="fs-file">
 <h1 class="title">Fs File</h1>
 
 <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 !! This file is generated by oca-gen-addon-readme !!
 !! changes will be overwritten.                   !!
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-!! source digest: sha256:cec7431f1becb99516793e51833fe9606ccd7459d148d15df61b03c14de1f6e4
+!! source digest: sha256:1e4d767972e6eb4be41e096d5cdff0f0ba49274b1caa6121c9eaeb7dfc54b091
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
-<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Alpha" src="https://img.shields.io/badge/maturity-Alpha-red.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/storage/tree/16.0/fs_file"><img alt="OCA/storage" src="https://img.shields.io/badge/github-OCA%2Fstorage-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/storage-16-0/storage-16-0-fs_file"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/storage&amp;target_branch=16.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
-<p>This addon defines a new field type <cite>FSFile</cite> which is a file field that stores
-a file in an external filesystem instead of the odoo’s filestore. This is useful for
-large files that you don’t want to store in the filestore. Moreover, the field
-value provides you an interface to access the file’s contents and metadata.</p>
+<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Alpha" src="https://img.shields.io/badge/maturity-Alpha-red.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/storage/tree/17.0/fs_file"><img alt="OCA/storage" src="https://img.shields.io/badge/github-OCA%2Fstorage-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/storage-17-0/storage-17-0-fs_file"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/storage&amp;target_branch=17.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
+<p>This addon defines a new field type FSFile which is a file field that
+stores a file in an external filesystem instead of the odoo’s filestore.
+This is useful for large files that you don’t want to store in the
+filestore. Moreover, the field value provides you an interface to access
+the file’s contents and metadata.</p>
 <div class="admonition important">
 <p class="first admonition-title">Important</p>
 <p class="last">This is an alpha version, the data model and design can change at any time without warning.
 Only for development or testing purpose, do not use in production.
 <a class="reference external" href="https://odoo-community.org/page/development-status">More details on development status</a></p>
 </div>
 <p><strong>Table of contents</strong></p>
@@ -404,20 +405,22 @@
 <h1><a class="toc-backref" href="#toc-entry-1">Usage</a></h1>
 <p>The new field <strong>FSFile</strong> has been developed to allows you to store files
 in an external filesystem storage. Its design is based on the following
 principles:</p>
 <ul class="simple">
 <li>The content of the file must be read from the filesystem only when
 needed.</li>
-<li>It must be possible to manipulate the file content as a stream by default.</li>
-<li>Unlike Odoo’s Binary field, the content is the raw file content by default
-(no base64 encoding).</li>
-<li>To allows to exchange the file content with other systems, writing the
-content as base64 is possible. The read operation will return a json
-structure with the filename, the mimetype, the size and a url to download the file.</li>
+<li>It must be possible to manipulate the file content as a stream by
+default.</li>
+<li>Unlike Odoo’s Binary field, the content is the raw file content by
+default (no base64 encoding).</li>
+<li>To allows to exchange the file content with other systems, writing
+the content as base64 is possible. The read operation will return a
+json structure with the filename, the mimetype, the size and a url to
+download the file.</li>
 </ul>
 <p>This design allows to minimize the memory consumption of the server when
 manipulating large files and exchanging them with other systems through
 the default jsonrpc interface.</p>
 <p>Concretely, this design allows you to write code like this:</p>
 <pre class="code python literal-block">
 <span class="kn">from</span> <span class="nn">IO</span> <span class="kn">import</span> <span class="n">BytesIO</span><span class="w">
@@ -504,109 +507,123 @@
 <div class="section" id="changelog">
 <h1><a class="toc-backref" href="#toc-entry-2">Changelog</a></h1>
 <div class="section" id="section-1">
 <h2><a class="toc-backref" href="#toc-entry-3">16.0.1.0.6 (2024-02-23)</a></h2>
 <p><strong>Bugfixes</strong></p>
 <ul>
 <li><p class="first">Fixes the creation of empty files.</p>
-<p>Before this change, the creation of empty files resulted in a constraint
-violation error. This was due to the fact that even if a name was given
-to the file it was not preserved into the FSFileValue object if no content
-was given. As result, when the corresponding ir.attachment was created in
-the database, the name was not set and the ‘required’ constraint was violated. (<a class="reference external" href="https://github.com/OCA/storage/issues/341">#341</a>)</p>
+<p>Before this change, the creation of empty files resulted in a
+constraint violation error. This was due to the fact that even if a
+name was given to the file it was not preserved into the FSFileValue
+object if no content was given. As result, when the corresponding
+ir.attachment was created in the database, the name was not set and
+the ‘required’ constraint was violated.
+(<a class="reference external" href="https://github.com/OCA/storage/issues/341">#341</a>)</p>
 </li>
 </ul>
 </div>
 <div class="section" id="section-2">
 <h2><a class="toc-backref" href="#toc-entry-4">16.0.1.0.5 (2023-11-30)</a></h2>
 <p><strong>Bugfixes</strong></p>
 <ul class="simple">
-<li>Ensure the cache is properly set when a new value is assigned to a FSFile field.
-If the field is stored the value to the cache must be a FSFileValue object
-linked to the attachment record used to store the file. Otherwise the value
-must be one given since it could be the result of a compute method. (<a class="reference external" href="https://github.com/OCA/storage/issues/290">#290</a>)</li>
+<li>Ensure the cache is properly set when a new value is assigned to a
+FSFile field. If the field is stored the value to the cache must be a
+FSFileValue object linked to the attachment record used to store the
+file. Otherwise the value must be one given since it could be the
+result of a compute method.
+(<a class="reference external" href="https://github.com/OCA/storage/issues/290">#290</a>)</li>
 </ul>
 </div>
 <div class="section" id="section-3">
 <h2><a class="toc-backref" href="#toc-entry-5">16.0.1.0.4 (2023-10-17)</a></h2>
 <p><strong>Bugfixes</strong></p>
 <ul>
 <li><p class="first">Browse attachment with sudo() to avoid read access errors</p>
-<p>In models that have a multi fs image relation, a new line
-in form will trigger onchanges and will call the fs.file model
+<p>In models that have a multi fs image relation, a new line in form
+will trigger onchanges and will call the fs.file model
 ‘convert_to_cache()’ method that will try to browse the attachment
-with user profile that could have no read rights on attachment model. (<a class="reference external" href="https://github.com/OCA/storage/issues/288">#288</a>)</p>
+with user profile that could have no read rights on attachment model.
+(<a class="reference external" href="https://github.com/OCA/storage/issues/288">#288</a>)</p>
 </li>
 </ul>
 </div>
 <div class="section" id="section-4">
 <h2><a class="toc-backref" href="#toc-entry-6">16.0.1.0.3 (2023-10-05)</a></h2>
 <p><strong>Bugfixes</strong></p>
 <ul>
 <li><p class="first">Fix the <em>mimetype</em> property on <em>FSFileValue</em> objects.</p>
 <p>The <em>mimetype</em> value is computed as follow:</p>
 <ul class="simple">
-<li>If an attachment is set, the mimetype is taken from the attachment.</li>
-<li>If no attachment is set, the mimetype is guessed from the name of the file.</li>
-<li>If the mimetype cannot be guessed from the name, the mimetype is guessed from
-the content of the file. (<a class="reference external" href="https://github.com/OCA/storage/issues/284">#284</a>)</li>
+<li>If an attachment is set, the mimetype is taken from the
+attachment.</li>
+<li>If no attachment is set, the mimetype is guessed from the name of
+the file.</li>
+<li>If the mimetype cannot be guessed from the name, the mimetype is
+guessed from the content of the file.
+(<a class="reference external" href="https://github.com/OCA/storage/issues/284">#284</a>)</li>
 </ul>
 </li>
 </ul>
 </div>
 <div class="section" id="section-5">
 <h2><a class="toc-backref" href="#toc-entry-7">16.0.1.0.1 (2023-09-29)</a></h2>
 <p><strong>Features</strong></p>
 <ul class="simple">
 <li>Add a <em>url_path</em> property on the <em>FSFileValue</em> object. This property
 allows you to easily get access to the relative path of the file on
-the filesystem. This value is only available if the filesystem storage
-is configured with a <em>Base URL</em> value. (<a class="reference external" href="https://github.com/OCA/storage/issues/281">#281</a>)</li>
+the filesystem. This value is only available if the filesystem
+storage is configured with a <em>Base URL</em> value.
+(<a class="reference external" href="https://github.com/OCA/storage/issues/281">#281</a>)</li>
 </ul>
 <p><strong>Bugfixes</strong></p>
 <ul>
-<li><p class="first">The <em>url_path</em>, <em>url</em> and <em>internal_url</em> properties on the <em>FSFileValue</em>
-object return <em>None</em> if the information is not available (instead of <em>False</em>).</p>
-<p>The <em>url</em> property on the <em>FSFileValue</em> object returns the filesystem url nor
-the url field of the attachment. (<a class="reference external" href="https://github.com/OCA/storage/issues/281">#281</a>)</p>
+<li><p class="first">The <em>url_path</em>, <em>url</em> and <em>internal_url</em> properties on the
+<em>FSFileValue</em> object return <em>None</em> if the information is not
+available (instead of <em>False</em>).</p>
+<p>The <em>url</em> property on the <em>FSFileValue</em> object returns the filesystem
+url nor the url field of the attachment.
+(<a class="reference external" href="https://github.com/OCA/storage/issues/281">#281</a>)</p>
 </li>
 </ul>
 </div>
 </div>
 <div class="section" id="bug-tracker">
 <h1><a class="toc-backref" href="#toc-entry-8">Bug Tracker</a></h1>
 <p>Bugs are tracked on <a class="reference external" href="https://github.com/OCA/storage/issues">GitHub Issues</a>.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-<a class="reference external" href="https://github.com/OCA/storage/issues/new?body=module:%20fs_file%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
+<a class="reference external" href="https://github.com/OCA/storage/issues/new?body=module:%20fs_file%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
 <p>Do not contact contributors directly about support or help with technical issues.</p>
 </div>
 <div class="section" id="credits">
 <h1><a class="toc-backref" href="#toc-entry-9">Credits</a></h1>
 <div class="section" id="authors">
 <h2><a class="toc-backref" href="#toc-entry-10">Authors</a></h2>
 <ul class="simple">
 <li>ACSONE SA/NV</li>
 </ul>
 </div>
 <div class="section" id="contributors">
 <h2><a class="toc-backref" href="#toc-entry-11">Contributors</a></h2>
-<p>Laurent Mignon &lt;<a class="reference external" href="mailto:laurent.mignon&#64;acsone.eu">laurent.mignon&#64;acsone.eu</a>&gt;
-Marie Lejeune &lt;<a class="reference external" href="mailto:marie.lejeune&#64;acsone.eu">marie.lejeune&#64;acsone.eu</a>&gt;
-Hugues Damry &lt;<a class="reference external" href="mailto:hughes.damry&#64;acsone.eu">hughes.damry&#64;acsone.eu</a>&gt;</p>
+<ul class="simple">
+<li>Laurent Mignon &lt;<a class="reference external" href="mailto:laurent.mignon&#64;acsone.eu">laurent.mignon&#64;acsone.eu</a>&gt;</li>
+<li>Marie Lejeune &lt;<a class="reference external" href="mailto:marie.lejeune&#64;acsone.eu">marie.lejeune&#64;acsone.eu</a>&gt;</li>
+<li>Hugues Damry &lt;<a class="reference external" href="mailto:hughes.damry&#64;acsone.eu">hughes.damry&#64;acsone.eu</a>&gt;</li>
+<li>Nguyen Minh Chien &lt;<a class="reference external" href="mailto:chien&#64;trobz.com">chien&#64;trobz.com</a>&gt;</li>
+</ul>
 </div>
 <div class="section" id="maintainers">
 <h2><a class="toc-backref" href="#toc-entry-12">Maintainers</a></h2>
 <p>This module is maintained by the OCA.</p>
 <a class="reference external image-reference" href="https://odoo-community.org"><img alt="Odoo Community Association" src="https://odoo-community.org/logo.png" /></a>
 <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
 <p>Current <a class="reference external" href="https://odoo-community.org/page/maintainer-role">maintainer</a>:</p>
 <p><a class="reference external image-reference" href="https://github.com/lmignon"><img alt="lmignon" src="https://github.com/lmignon.png?size=40px" /></a></p>
-<p>This module is part of the <a class="reference external" href="https://github.com/OCA/storage/tree/16.0/fs_file">OCA/storage</a> project on GitHub.</p>
+<p>This module is part of the <a class="reference external" href="https://github.com/OCA/storage/tree/17.0/fs_file">OCA/storage</a> project on GitHub.</p>
 <p>You are welcome to contribute. To learn how please visit <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>.</p>
 </div>
 </div>
 </div>
 </body>
 </html>
```

### html2text {}

```diff
@@ -1,11 +1,11 @@
 ************ FFss FFiillee ************
 _[_A_l_p_h_a_]_[_L_i_c_e_n_s_e_:_ _A_G_P_L_-_3_]_[_O_C_A_/_s_t_o_r_a_g_e_]_[_T_r_a_n_s_l_a_t_e_ _m_e_ _o_n_ _W_e_b_l_a_t_e_]_[_T_r_y_ _m_e_ _o_n
 _R_u_n_b_o_a_t_]
-This addon defines a new field typeFSFilewhich is a file field that stores a
+This addon defines a new field type FSFile which is a file field that stores a
 file in an external filesystem instead of the odoo’s filestore. This is useful
 for large files that you don’t want to store in the filestore. Moreover, the
 field value provides you an interface to access the file’s contents and
 metadata.
 Important
 This is an alpha version, the data model and design can change at any time
 without warning. Only for development or testing purpose, do not use in
@@ -169,16 +169,18 @@
 it by providing a detailed and welcomed _f_e_e_d_b_a_c_k.
 Do not contact contributors directly about support or help with technical
 issues.
 ************ _CC_rr_ee_dd_ii_tt_ss ************
 ********** _AA_uu_tt_hh_oo_rr_ss **********
     * ACSONE SA/NV
 ********** _CC_oo_nn_tt_rr_ii_bb_uu_tt_oo_rr_ss **********
-Laurent Mignon <_l_a_u_r_e_n_t_._m_i_g_n_o_n_@_a_c_s_o_n_e_._e_u> Marie Lejeune
-<_m_a_r_i_e_._l_e_j_e_u_n_e_@_a_c_s_o_n_e_._e_u> Hugues Damry <_h_u_g_h_e_s_._d_a_m_r_y_@_a_c_s_o_n_e_._e_u>
+    * Laurent Mignon <_l_a_u_r_e_n_t_._m_i_g_n_o_n_@_a_c_s_o_n_e_._e_u>
+    * Marie Lejeune <_m_a_r_i_e_._l_e_j_e_u_n_e_@_a_c_s_o_n_e_._e_u>
+    * Hugues Damry <_h_u_g_h_e_s_._d_a_m_r_y_@_a_c_s_o_n_e_._e_u>
+    * Nguyen Minh Chien <_c_h_i_e_n_@_t_r_o_b_z_._c_o_m>
 ********** _MM_aa_ii_nn_tt_aa_ii_nn_ee_rr_ss **********
 This module is maintained by the OCA.
 _[_O_d_o_o_ _C_o_m_m_u_n_i_t_y_ _A_s_s_o_c_i_a_t_i_o_n_]
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 Current _m_a_i_n_t_a_i_n_e_r:
```

## odoo/addons/fs_file/static/src/views/fields/fsfile_field.esm.js

### js-beautify {}

```diff
@@ -1,87 +1,59 @@
 /** @odoo-module */
 
 /**
  * Copyright 2023 ACSONE SA/NV
  */
 import {
-    Component,
-    onWillUpdateProps,
-    useState
+    Component
 } from "@odoo/owl";
-
 import {
     FileUploader
 } from "@web/views/fields/file_handler";
 import {
-    getDataURLFromFile
-} from "@web/core/utils/urls";
+    MAX_FILENAME_SIZE_BYTES
+} from "@web/views/fields/binary/binary_field";
 import {
     registry
 } from "@web/core/registry";
 import {
     standardFieldProps
 } from "@web/views/fields/standard_field_props";
 import {
+    toBase64Length
+} from "@web/core/utils/binary";
+import {
     useService
 } from "@web/core/utils/hooks";
 
 export class FSFileField extends Component {
     setup() {
         this.notification = useService("notification");
-        this.state = useState({
-            ...this.props.value,
-            isValid: true,
-        });
-        onWillUpdateProps((nextProps) => {
-            this.state.isUploading = false;
-            const {
-                filename,
-                mimetype,
-                url
-            } = nextProps.value || {};
-            this.state.filename = filename;
-            this.state.mimetype = mimetype;
-            this.state.url = url;
-        });
     }
-
-    async uploadFile(file) {
-        this.state.isUploading = true;
-        const data = await getDataURLFromFile(file);
-        this.props.record.update({
-            [this.props.name]: {
-                filename: file.name,
-                content: data.split(",")[1],
-            },
-        });
-        this.state.isUploading = false;
+    get filename() {
+        return (this.props.record.data[this.props.name].filename || "").slice(
+            0,
+            toBase64Length(MAX_FILENAME_SIZE_BYTES)
+        );
+    }
+    get url() {
+        return this.props.record.data[this.props.name].url || "";
     }
 
-    clear() {
+    onFileRemove() {
         this.props.record.update({
             [this.props.name]: false
         });
     }
-
-    onFileRemove() {
-        this.state.isValid = true;
-        this.props.update(false);
-    }
     onFileUploaded(info) {
-        this.state.isValid = true;
-        this.props.update({
-            filename: info.name,
-            content: info.data,
-        });
-    }
-    onLoadFailed() {
-        this.state.isValid = false;
-        this.notification.add(this.env._t("Could not display the selected image"), {
-            type: "danger",
+        this.props.record.update({
+            [this.props.name]: {
+                filename: info.name,
+                content: info.data,
+            },
         });
     }
 }
 
 FSFileField.template = "fs_file.FSFileField";
 FSFileField.components = {
     FileUploader,
@@ -92,8 +64,13 @@
         type: String,
         optional: true
     },
 };
 FSFileField.defaultProps = {
     acceptedFileExtensions: "*",
 };
-registry.category("fields").add("fs_file", FSFileField);
+
+export const fSFileField = {
+    component: FSFileField,
+};
+
+registry.category("fields").add("fs_file", fSFileField);
```

## odoo/addons/fs_file/static/src/views/fields/fsfile_field.xml

### odoo/addons/fs_file/static/src/views/fields/fsfile_field.xml

```diff
@@ -1,32 +1,39 @@
 <?xml version="1.0" encoding="utf-8"?>
 <templates xml:space="preserve">
   <t t-name="fs_file.FSFileField" owl="1">
     <t t-if="!props.readonly">
-      <div class="w-100 d-inline-flex">
-        <FileUploader acceptedFileExtensions="props.acceptedFileExtensions" t-key="props.record.resId" onUploaded.bind="onFileUploaded">
-          <t t-if="props.value">
-            <t t-if="state.url">
-              <a class="o_form_uri fs_file_link" t-att-href="state.url + '?download=1'">
+      <t t-if="props.record.data[props.name]">
+        <div class="w-100 d-inline-flex gap-1">
+          <FileUploader acceptedFileExtensions="props.acceptedFileExtensions" t-key="props.record.resId" onUploaded.bind="onFileUploaded">
+            <t t-if="url">
+              <a class="o_form_uri fs_file_link" t-att-href="url + '?download=1'">
                 <span class="fa fa-download me-2"/>
-                <t t-if="state.filename" t-esc="state.filename"/>
+                <t t-if="filename" t-esc="filename"/>
               </a>
             </t>
             <t t-else="">
-              <t t-if="state.filename" t-esc="state.filename"/>
+              <t t-if="filename" t-esc="filename"/>
             </t>
-          </t>
-          <t t-set-slot="toggler">
-            <button class="btn btn-secondary fa fa-pencil o_select_file_button py-0" data-tooltip="Edit" aria-label="Edit"/>
-          </t>
-          <button class="btn btn-secondary fa fa-trash o_clear_file_button py-0" data-tooltip="Clear" aria-label="Clear" t-on-click="onFileRemove"/>
-        </FileUploader>
-      </div>
+            <t t-set-slot="toggler">
+              <button class="btn btn-link btn-sm lh-1 fa fa-pencil o_select_file_button" data-tooltip="Edit" aria-label="Edit"/>
+            </t>
+            <button class="btn btn-link btn-sm lh-1 fa fa-trash o_clear_file_button" data-tooltip="Clear" aria-label="Clear" t-on-click="onFileRemove" t-if="props.record.data[props.name]"/>
+          </FileUploader>
+        </div>
+      </t>
+      <t t-else="">
+        <label class="o_select_file_button btn btn-primary">
+          <FileUploader acceptedFileExtensions="props.acceptedFileExtensions" t-key="props.record.resId" onUploaded.bind="onFileUploaded">
+            <t t-set-slot="toggler">Upload your file</t>
+          </FileUploader>
+        </label>
+      </t>
     </t>
-    <t t-elif="props.value">
-      <a class="o_form_uri fs_file_link" t-att-href="state.url">
+    <t t-elif="props.record.data[props.name]">
+      <a class="o_form_uri fs_file_link" t-att-href="url">
         <span class="fa fa-download me-2"/>
-        <t t-if="state.filename" t-esc="state.filename"/>
+        <t t-if="filename" t-esc="filename"/>
       </a>
     </t>
   </t>
 </templates>
```

## odoo/addons/fs_file/tests/models.py

```diff
@@ -3,13 +3,12 @@
 
 from odoo import models
 
 from ..fields import FSFile
 
 
 class TestModel(models.Model):
-
     _name = "test.model"
     _description = "Test Model"
     _log_access = False
 
     fs_file = FSFile()
```

## Comparing `odoo/addons/fs_file/readme/HISTORY.rst` & `odoo/addons/fs_file/readme/HISTORY.md`

 * *Files 11% similar despite different names*

```diff
@@ -1,71 +1,71 @@
-16.0.1.0.6 (2024-02-23)
-~~~~~~~~~~~~~~~~~~~~~~~
+## 16.0.1.0.6 (2024-02-23)
 
 **Bugfixes**
 
 - Fixes the creation of empty files.
 
-  Before this change, the creation of empty files resulted in a constraint
-  violation error. This was due to the fact that even if a name was given
-  to the file it was not preserved into the FSFileValue object if no content
-  was given. As result, when the corresponding ir.attachment was created in
-  the database, the name was not set and the 'required' constraint was violated. (`#341 <https://github.com/OCA/storage/issues/341>`_)
+  Before this change, the creation of empty files resulted in a
+  constraint violation error. This was due to the fact that even if a
+  name was given to the file it was not preserved into the FSFileValue
+  object if no content was given. As result, when the corresponding
+  ir.attachment was created in the database, the name was not set and
+  the 'required' constraint was violated.
+  ([\#341](https://github.com/OCA/storage/issues/341))
 
-
-16.0.1.0.5 (2023-11-30)
-~~~~~~~~~~~~~~~~~~~~~~~
+## 16.0.1.0.5 (2023-11-30)
 
 **Bugfixes**
 
-- Ensure the cache is properly set when a new value is assigned to a FSFile field.
-  If the field is stored the value to the cache must be a FSFileValue object
-  linked to the attachment record used to store the file. Otherwise the value
-  must be one given since it could be the result of a compute method. (`#290 <https://github.com/OCA/storage/issues/290>`_)
-
+- Ensure the cache is properly set when a new value is assigned to a
+  FSFile field. If the field is stored the value to the cache must be a
+  FSFileValue object linked to the attachment record used to store the
+  file. Otherwise the value must be one given since it could be the
+  result of a compute method.
+  ([\#290](https://github.com/OCA/storage/issues/290))
 
-16.0.1.0.4 (2023-10-17)
-~~~~~~~~~~~~~~~~~~~~~~~
+## 16.0.1.0.4 (2023-10-17)
 
 **Bugfixes**
 
 - Browse attachment with sudo() to avoid read access errors
 
-  In models that have a multi fs image relation, a new line
-  in form will trigger onchanges and will call the fs.file model
-  'convert_to_cache()' method that will try to browse the attachment
-  with user profile that could have no read rights on attachment model. (`#288 <https://github.com/OCA/storage/issues/288>`_)
-
+  In models that have a multi fs image relation, a new line in form will
+  trigger onchanges and will call the fs.file model 'convert_to_cache()'
+  method that will try to browse the attachment with user profile that
+  could have no read rights on attachment model.
+  ([\#288](https://github.com/OCA/storage/issues/288))
 
-16.0.1.0.3 (2023-10-05)
-~~~~~~~~~~~~~~~~~~~~~~~
+## 16.0.1.0.3 (2023-10-05)
 
 **Bugfixes**
 
 - Fix the *mimetype* property on *FSFileValue* objects.
 
   The *mimetype* value is computed as follow:
 
-  * If an attachment is set, the mimetype is taken from the attachment.
-  * If no attachment is set, the mimetype is guessed from the name of the file.
-  * If the mimetype cannot be guessed from the name, the mimetype is guessed from
-    the content of the file. (`#284 <https://github.com/OCA/storage/issues/284>`_)
+  - If an attachment is set, the mimetype is taken from the attachment.
+  - If no attachment is set, the mimetype is guessed from the name of
+    the file.
+  - If the mimetype cannot be guessed from the name, the mimetype is
+    guessed from the content of the file.
+    ([\#284](https://github.com/OCA/storage/issues/284))
 
-
-16.0.1.0.1 (2023-09-29)
-~~~~~~~~~~~~~~~~~~~~~~~
+## 16.0.1.0.1 (2023-09-29)
 
 **Features**
 
 - Add a *url_path* property on the *FSFileValue* object. This property
   allows you to easily get access to the relative path of the file on
   the filesystem. This value is only available if the filesystem storage
-  is configured with a *Base URL* value. (`#281 <https://github.com/OCA/storage/issues/281>`__)
-
+  is configured with a *Base URL* value.
+  ([\#281](https://github.com/OCA/storage/issues/281))
 
 **Bugfixes**
 
-- The *url_path*, *url* and *internal_url* properties on the *FSFileValue*
-  object return *None* if the information is not available (instead of *False*).
-
-  The *url* property on the *FSFileValue* object returns the filesystem url nor
-  the url field of the attachment. (`#281 <https://github.com/OCA/storage/issues/281>`__)
+- The *url_path*, *url* and *internal_url* properties on the
+  *FSFileValue* object return *None* if the information is not available
+  (instead of *False*).
+
+  The *url* property on the *FSFileValue* object returns the filesystem
+  url nor the url field of the attachment.
+  ([\#281](https://github.com/OCA/storage/issues/281))
```

## Comparing `odoo/addons/fs_file/readme/USAGE.rst` & `odoo/addons/fs_file/readme/USAGE.md`

 * *Files 11% similar despite different names*

```diff
@@ -1,100 +1,102 @@
 The new field **FSFile** has been developed to allows you to store files
 in an external filesystem storage. Its design is based on the following
 principles:
 
-* The content of the file must be read from the filesystem only when
+- The content of the file must be read from the filesystem only when
   needed.
-* It must be possible to manipulate the file content as a stream by default.
-* Unlike Odoo's Binary field, the content is the raw file content by default
-  (no base64 encoding).
-* To allows to exchange the file content with other systems, writing the
+- It must be possible to manipulate the file content as a stream by
+  default.
+- Unlike Odoo's Binary field, the content is the raw file content by
+  default (no base64 encoding).
+- To allows to exchange the file content with other systems, writing the
   content as base64 is possible. The read operation will return a json
-  structure with the filename, the mimetype, the size and a url to download the file.
+  structure with the filename, the mimetype, the size and a url to
+  download the file.
 
 This design allows to minimize the memory consumption of the server when
 manipulating large files and exchanging them with other systems through
 the default jsonrpc interface.
 
 Concretely, this design allows you to write code like this:
 
-.. code-block:: python
-
-  from IO import BytesIO
-  from odoo import models, fields
-  from odoo.addons.fs_file.fields import FSFile
-
-  class MyModel(models.Model):
-      _name = 'my.model'
-
-      name = fields.Char()
-      file = FSFile()
-
-  # Create a new record with a raw content
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': BytesIO(b"content"),
-  })
-
-  assert(my_model.file.read() == b"content")
-
-  # Create a new record with a base64 encoded content
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': b"content".encode('base64'),
-  })
-  assert(my_model.file.read() == b"content")
-
-  # Create a new record with a file content
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': open('my_file.txt', 'rb'),
-  })
-  assert(my_model.file.read() == b"content")
-  assert(my_model.file.name == "my_file.txt")
-
-  # create a record with a file content as base64 encoded and a filename
-  # This method is useful to create a record from a file uploaded
-  # through the web interface.
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': {
-          'filename': 'my_file.txt',
-          'content': base64.b64encode(b"content"),
-      },
-  })
-  assert(my_model.file.read() == b"content")
-  assert(my_model.file.name == "my_file.txt")
-
-  # write the content of the file as base64 encoded and a filename
-  # This method is useful to update a record from a file uploaded
-  # through the web interface.
-  my_model.write({
-      'file': {
-          'name': 'my_file.txt',
-          'file': base64.b64encode(b"content"),
-      },
-  })
-
-  # the call to read() will return a json structure with the filename,
-  # the mimetype, the size and a url to download the file.
-  info = my_model.file.read()
-  assert(info["file"] == {
-      "filename": "my_file.txt",
-      "mimetype": "text/plain",
-      "size": 7,
-      "url": "/web/content/1234/my_file.txt",
-  })
-
-  # use the field as a file stream
-  # In such a case, the content is read from the filesystem without being
-  # stored in memory.
-  with my_model.file.open("rb) as f:
-    assert(f.read() == b"content")
-
-  # use the field as a file stream to write the content
-  # In such a case, the content is written to the filesystem without being
-  # stored in memory. This kind of approach is useful to manipulate large
-  # files and to avoid to use too much memory.
-  # Transactional behaviour is ensured by the implementation!
-  with my_model.file.open("wb") as f:
-      f.write(b"content")
+``` python
+from IO import BytesIO
+from odoo import models, fields
+from odoo.addons.fs_file.fields import FSFile
+
+class MyModel(models.Model):
+    _name = 'my.model'
+
+    name = fields.Char()
+    file = FSFile()
+
+# Create a new record with a raw content
+my_model = MyModel.create({
+    'name': 'My File',
+    'file': BytesIO(b"content"),
+})
+
+assert(my_model.file.read() == b"content")
+
+# Create a new record with a base64 encoded content
+my_model = MyModel.create({
+    'name': 'My File',
+    'file': b"content".encode('base64'),
+})
+assert(my_model.file.read() == b"content")
+
+# Create a new record with a file content
+my_model = MyModel.create({
+    'name': 'My File',
+    'file': open('my_file.txt', 'rb'),
+})
+assert(my_model.file.read() == b"content")
+assert(my_model.file.name == "my_file.txt")
+
+# create a record with a file content as base64 encoded and a filename
+# This method is useful to create a record from a file uploaded
+# through the web interface.
+my_model = MyModel.create({
+    'name': 'My File',
+    'file': {
+        'filename': 'my_file.txt',
+        'content': base64.b64encode(b"content"),
+    },
+})
+assert(my_model.file.read() == b"content")
+assert(my_model.file.name == "my_file.txt")
+
+# write the content of the file as base64 encoded and a filename
+# This method is useful to update a record from a file uploaded
+# through the web interface.
+my_model.write({
+    'file': {
+        'name': 'my_file.txt',
+        'file': base64.b64encode(b"content"),
+    },
+})
+
+# the call to read() will return a json structure with the filename,
+# the mimetype, the size and a url to download the file.
+info = my_model.file.read()
+assert(info["file"] == {
+    "filename": "my_file.txt",
+    "mimetype": "text/plain",
+    "size": 7,
+    "url": "/web/content/1234/my_file.txt",
+})
+
+# use the field as a file stream
+# In such a case, the content is read from the filesystem without being
+# stored in memory.
+with my_model.file.open("rb) as f:
+  assert(f.read() == b"content")
+
+# use the field as a file stream to write the content
+# In such a case, the content is written to the filesystem without being
+# stored in memory. This kind of approach is useful to manipulate large
+# files and to avoid to use too much memory.
+# Transactional behaviour is ensured by the implementation!
+with my_model.file.open("wb") as f:
+    f.write(b"content")
+```
```

## Comparing `odoo_addon_fs_file-16.0.1.0.6.1.dist-info/METADATA` & `odoo_addon_fs_file-17.0.1.0.0.2.dist-info/METADATA`

 * *Files 19% similar despite different names*

```diff
@@ -1,59 +1,59 @@
 Metadata-Version: 2.1
-Name: odoo-addon-fs-file
-Version: 16.0.1.0.6.1
+Name: odoo-addon-fs_file
+Version: 17.0.1.0.0.2
+Requires-Python: >=3.10
+Requires-Dist: odoo-addon-fs_attachment>=17.0dev,<17.1dev
+Requires-Dist: odoo>=17.0a,<17.1dev
 Summary: Field to store files into filesystem storages
 Home-page: https://github.com/OCA/storage
+License: AGPL-3
 Author: ACSONE SA/NV,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
-License: AGPL-3
-Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 16.0
+Classifier: Framework :: Odoo :: 17.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Classifier: Development Status :: 3 - Alpha
-Requires-Python: >=3.10
-Requires-Dist: odoo-addon-fs-attachment <16.1dev,>=16.0dev
-Requires-Dist: odoo <16.1dev,>=16.0a
 
 =======
 Fs File
 =======
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:cec7431f1becb99516793e51833fe9606ccd7459d148d15df61b03c14de1f6e4
+   !! source digest: sha256:1e4d767972e6eb4be41e096d5cdff0f0ba49274b1caa6121c9eaeb7dfc54b091
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Alpha-red.png
     :target: https://odoo-community.org/page/development-status
     :alt: Alpha
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fstorage-lightgray.png?logo=github
-    :target: https://github.com/OCA/storage/tree/16.0/fs_file
+    :target: https://github.com/OCA/storage/tree/17.0/fs_file
     :alt: OCA/storage
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/storage-16-0/storage-16-0-fs_file
+    :target: https://translation.odoo-community.org/projects/storage-17-0/storage-17-0-fs_file
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/storage&target_branch=16.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/storage&target_branch=17.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
-This addon defines a new field type `FSFile` which is a file field that stores
-a file in an external filesystem instead of the odoo's filestore. This is useful for
-large files that you don't want to store in the filestore. Moreover, the field
-value provides you an interface to access the file's contents and metadata.
+This addon defines a new field type FSFile which is a file field that
+stores a file in an external filesystem instead of the odoo's filestore.
+This is useful for large files that you don't want to store in the
+filestore. Moreover, the field value provides you an interface to access
+the file's contents and metadata.
 
 .. IMPORTANT::
    This is an alpha version, the data model and design can change at any time without warning.
    Only for development or testing purpose, do not use in production.
    `More details on development status <https://odoo-community.org/page/development-status>`_
 
 **Table of contents**
@@ -64,213 +64,222 @@
 Usage
 =====
 
 The new field **FSFile** has been developed to allows you to store files
 in an external filesystem storage. Its design is based on the following
 principles:
 
-* The content of the file must be read from the filesystem only when
-  needed.
-* It must be possible to manipulate the file content as a stream by default.
-* Unlike Odoo's Binary field, the content is the raw file content by default
-  (no base64 encoding).
-* To allows to exchange the file content with other systems, writing the
-  content as base64 is possible. The read operation will return a json
-  structure with the filename, the mimetype, the size and a url to download the file.
+-  The content of the file must be read from the filesystem only when
+   needed.
+-  It must be possible to manipulate the file content as a stream by
+   default.
+-  Unlike Odoo's Binary field, the content is the raw file content by
+   default (no base64 encoding).
+-  To allows to exchange the file content with other systems, writing
+   the content as base64 is possible. The read operation will return a
+   json structure with the filename, the mimetype, the size and a url to
+   download the file.
 
 This design allows to minimize the memory consumption of the server when
 manipulating large files and exchanging them with other systems through
 the default jsonrpc interface.
 
 Concretely, this design allows you to write code like this:
 
-.. code-block:: python
+.. code:: python
 
-  from IO import BytesIO
-  from odoo import models, fields
-  from odoo.addons.fs_file.fields import FSFile
-
-  class MyModel(models.Model):
-      _name = 'my.model'
-
-      name = fields.Char()
-      file = FSFile()
-
-  # Create a new record with a raw content
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': BytesIO(b"content"),
-  })
-
-  assert(my_model.file.read() == b"content")
-
-  # Create a new record with a base64 encoded content
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': b"content".encode('base64'),
-  })
-  assert(my_model.file.read() == b"content")
-
-  # Create a new record with a file content
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': open('my_file.txt', 'rb'),
-  })
-  assert(my_model.file.read() == b"content")
-  assert(my_model.file.name == "my_file.txt")
-
-  # create a record with a file content as base64 encoded and a filename
-  # This method is useful to create a record from a file uploaded
-  # through the web interface.
-  my_model = MyModel.create({
-      'name': 'My File',
-      'file': {
-          'filename': 'my_file.txt',
-          'content': base64.b64encode(b"content"),
-      },
-  })
-  assert(my_model.file.read() == b"content")
-  assert(my_model.file.name == "my_file.txt")
-
-  # write the content of the file as base64 encoded and a filename
-  # This method is useful to update a record from a file uploaded
-  # through the web interface.
-  my_model.write({
-      'file': {
-          'name': 'my_file.txt',
-          'file': base64.b64encode(b"content"),
-      },
-  })
-
-  # the call to read() will return a json structure with the filename,
-  # the mimetype, the size and a url to download the file.
-  info = my_model.file.read()
-  assert(info["file"] == {
-      "filename": "my_file.txt",
-      "mimetype": "text/plain",
-      "size": 7,
-      "url": "/web/content/1234/my_file.txt",
-  })
-
-  # use the field as a file stream
-  # In such a case, the content is read from the filesystem without being
-  # stored in memory.
-  with my_model.file.open("rb) as f:
-    assert(f.read() == b"content")
-
-  # use the field as a file stream to write the content
-  # In such a case, the content is written to the filesystem without being
-  # stored in memory. This kind of approach is useful to manipulate large
-  # files and to avoid to use too much memory.
-  # Transactional behaviour is ensured by the implementation!
-  with my_model.file.open("wb") as f:
-      f.write(b"content")
+   from IO import BytesIO
+   from odoo import models, fields
+   from odoo.addons.fs_file.fields import FSFile
+
+   class MyModel(models.Model):
+       _name = 'my.model'
+
+       name = fields.Char()
+       file = FSFile()
+
+   # Create a new record with a raw content
+   my_model = MyModel.create({
+       'name': 'My File',
+       'file': BytesIO(b"content"),
+   })
+
+   assert(my_model.file.read() == b"content")
+
+   # Create a new record with a base64 encoded content
+   my_model = MyModel.create({
+       'name': 'My File',
+       'file': b"content".encode('base64'),
+   })
+   assert(my_model.file.read() == b"content")
+
+   # Create a new record with a file content
+   my_model = MyModel.create({
+       'name': 'My File',
+       'file': open('my_file.txt', 'rb'),
+   })
+   assert(my_model.file.read() == b"content")
+   assert(my_model.file.name == "my_file.txt")
+
+   # create a record with a file content as base64 encoded and a filename
+   # This method is useful to create a record from a file uploaded
+   # through the web interface.
+   my_model = MyModel.create({
+       'name': 'My File',
+       'file': {
+           'filename': 'my_file.txt',
+           'content': base64.b64encode(b"content"),
+       },
+   })
+   assert(my_model.file.read() == b"content")
+   assert(my_model.file.name == "my_file.txt")
+
+   # write the content of the file as base64 encoded and a filename
+   # This method is useful to update a record from a file uploaded
+   # through the web interface.
+   my_model.write({
+       'file': {
+           'name': 'my_file.txt',
+           'file': base64.b64encode(b"content"),
+       },
+   })
+
+   # the call to read() will return a json structure with the filename,
+   # the mimetype, the size and a url to download the file.
+   info = my_model.file.read()
+   assert(info["file"] == {
+       "filename": "my_file.txt",
+       "mimetype": "text/plain",
+       "size": 7,
+       "url": "/web/content/1234/my_file.txt",
+   })
+
+   # use the field as a file stream
+   # In such a case, the content is read from the filesystem without being
+   # stored in memory.
+   with my_model.file.open("rb) as f:
+     assert(f.read() == b"content")
+
+   # use the field as a file stream to write the content
+   # In such a case, the content is written to the filesystem without being
+   # stored in memory. This kind of approach is useful to manipulate large
+   # files and to avoid to use too much memory.
+   # Transactional behaviour is ensured by the implementation!
+   with my_model.file.open("wb") as f:
+       f.write(b"content")
 
 Changelog
 =========
 
 16.0.1.0.6 (2024-02-23)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Bugfixes**
 
-- Fixes the creation of empty files.
-
-  Before this change, the creation of empty files resulted in a constraint
-  violation error. This was due to the fact that even if a name was given
-  to the file it was not preserved into the FSFileValue object if no content
-  was given. As result, when the corresponding ir.attachment was created in
-  the database, the name was not set and the 'required' constraint was violated. (`#341 <https://github.com/OCA/storage/issues/341>`_)
+-  Fixes the creation of empty files.
 
+   Before this change, the creation of empty files resulted in a
+   constraint violation error. This was due to the fact that even if a
+   name was given to the file it was not preserved into the FSFileValue
+   object if no content was given. As result, when the corresponding
+   ir.attachment was created in the database, the name was not set and
+   the 'required' constraint was violated.
+   (`#341 <https://github.com/OCA/storage/issues/341>`__)
 
 16.0.1.0.5 (2023-11-30)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Bugfixes**
 
-- Ensure the cache is properly set when a new value is assigned to a FSFile field.
-  If the field is stored the value to the cache must be a FSFileValue object
-  linked to the attachment record used to store the file. Otherwise the value
-  must be one given since it could be the result of a compute method. (`#290 <https://github.com/OCA/storage/issues/290>`_)
-
+-  Ensure the cache is properly set when a new value is assigned to a
+   FSFile field. If the field is stored the value to the cache must be a
+   FSFileValue object linked to the attachment record used to store the
+   file. Otherwise the value must be one given since it could be the
+   result of a compute method.
+   (`#290 <https://github.com/OCA/storage/issues/290>`__)
 
 16.0.1.0.4 (2023-10-17)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Bugfixes**
 
-- Browse attachment with sudo() to avoid read access errors
-
-  In models that have a multi fs image relation, a new line
-  in form will trigger onchanges and will call the fs.file model
-  'convert_to_cache()' method that will try to browse the attachment
-  with user profile that could have no read rights on attachment model. (`#288 <https://github.com/OCA/storage/issues/288>`_)
+-  Browse attachment with sudo() to avoid read access errors
 
+   In models that have a multi fs image relation, a new line in form
+   will trigger onchanges and will call the fs.file model
+   'convert_to_cache()' method that will try to browse the attachment
+   with user profile that could have no read rights on attachment model.
+   (`#288 <https://github.com/OCA/storage/issues/288>`__)
 
 16.0.1.0.3 (2023-10-05)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Bugfixes**
 
-- Fix the *mimetype* property on *FSFileValue* objects.
-
-  The *mimetype* value is computed as follow:
+-  Fix the *mimetype* property on *FSFileValue* objects.
 
-  * If an attachment is set, the mimetype is taken from the attachment.
-  * If no attachment is set, the mimetype is guessed from the name of the file.
-  * If the mimetype cannot be guessed from the name, the mimetype is guessed from
-    the content of the file. (`#284 <https://github.com/OCA/storage/issues/284>`_)
+   The *mimetype* value is computed as follow:
 
+   -  If an attachment is set, the mimetype is taken from the
+      attachment.
+   -  If no attachment is set, the mimetype is guessed from the name of
+      the file.
+   -  If the mimetype cannot be guessed from the name, the mimetype is
+      guessed from the content of the file.
+      (`#284 <https://github.com/OCA/storage/issues/284>`__)
 
 16.0.1.0.1 (2023-09-29)
-~~~~~~~~~~~~~~~~~~~~~~~
+-----------------------
 
 **Features**
 
-- Add a *url_path* property on the *FSFileValue* object. This property
-  allows you to easily get access to the relative path of the file on
-  the filesystem. This value is only available if the filesystem storage
-  is configured with a *Base URL* value. (`#281 <https://github.com/OCA/storage/issues/281>`__)
-
+-  Add a *url_path* property on the *FSFileValue* object. This property
+   allows you to easily get access to the relative path of the file on
+   the filesystem. This value is only available if the filesystem
+   storage is configured with a *Base URL* value.
+   (`#281 <https://github.com/OCA/storage/issues/281>`__)
 
 **Bugfixes**
 
-- The *url_path*, *url* and *internal_url* properties on the *FSFileValue*
-  object return *None* if the information is not available (instead of *False*).
-
-  The *url* property on the *FSFileValue* object returns the filesystem url nor
-  the url field of the attachment. (`#281 <https://github.com/OCA/storage/issues/281>`__)
+-  The *url_path*, *url* and *internal_url* properties on the
+   *FSFileValue* object return *None* if the information is not
+   available (instead of *False*).
+
+   The *url* property on the *FSFileValue* object returns the filesystem
+   url nor the url field of the attachment.
+   (`#281 <https://github.com/OCA/storage/issues/281>`__)
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/storage/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/storage/issues/new?body=module:%20fs_file%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/storage/issues/new?body=module:%20fs_file%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
-~~~~~~~
+-------
 
 * ACSONE SA/NV
 
 Contributors
-~~~~~~~~~~~~
+------------
 
-Laurent Mignon <laurent.mignon@acsone.eu>
-Marie Lejeune <marie.lejeune@acsone.eu>
-Hugues Damry <hughes.damry@acsone.eu>
+-  Laurent Mignon <laurent.mignon@acsone.eu>
+-  Marie Lejeune <marie.lejeune@acsone.eu>
+-  Hugues Damry <hughes.damry@acsone.eu>
+-  Nguyen Minh Chien <chien@trobz.com>
 
 Maintainers
-~~~~~~~~~~~
+-----------
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
@@ -282,12 +291,10 @@
     :target: https://github.com/lmignon
     :alt: lmignon
 
 Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-lmignon| 
 
-This module is part of the `OCA/storage <https://github.com/OCA/storage/tree/16.0/fs_file>`_ project on GitHub.
+This module is part of the `OCA/storage <https://github.com/OCA/storage/tree/17.0/fs_file>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
-
-
```

## Comparing `odoo_addon_fs_file-16.0.1.0.6.1.dist-info/RECORD` & `odoo_addon_fs_file-17.0.1.0.0.2.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,24 +1,24 @@
-odoo/addons/fs_file/README.rst,sha256=E3x_dMQto24LBNDPv1hyAgbFS0b0yow1X_5qtfN2kEI,9583
+odoo/addons/fs_file/README.rst,sha256=-OWzuK-MpCemSYg5368io3LevC10RwYv4TZV6uVoNdc,9779
 odoo/addons/fs_file/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-odoo/addons/fs_file/__manifest__.py,sha256=retwmAmU_iH3ldmBzR7iciMHK1halM3UWMMf_DMiH2o,604
-odoo/addons/fs_file/fields.py,sha256=TabZF3SuzqyZ6maRFdhZWdxUiHgLs_VUFIDvJ9mDp2Y,16536
+odoo/addons/fs_file/__manifest__.py,sha256=ynlZ4AghCO_Jo5ZFs6zsfVXfIts5FWVpWDeXKy8Htsk,604
+odoo/addons/fs_file/fields.py,sha256=jvGolzHmGAaga03mBddfsr7_BwZpBiD0_Kgj2AVZyGY,16420
 odoo/addons/fs_file/i18n/es.po,sha256=ttM8aiHpGUOiO6EwsKqFP_rXPzNyb_3Fbq1ZlFqLr34,1042
-odoo/addons/fs_file/i18n/fs_file.pot,sha256=ssBL-Rjl0MZx2xRNqly5_gQYYMj59TcHO073aRKCWRo,957
+odoo/addons/fs_file/i18n/fs_file.pot,sha256=dd6cCin6uVrsVe4ER7Cqc1AflKQrJ0nWLQBv3wPlM-0,934
 odoo/addons/fs_file/i18n/it.po,sha256=9GXvAf_11bGgnUV8NlXGphV46w9tdH8pmstghwKBPQU,1044
-odoo/addons/fs_file/readme/CONTRIBUTORS.rst,sha256=zPaL9ggybb6Jjmkt_Eomqx623FBaYYEvejhWQxjPnCs,120
-odoo/addons/fs_file/readme/DESCRIPTION.rst,sha256=t1AswsCzxH15Kuy0Kp4QADF5MrrvAGU50m0USIx22bg,319
-odoo/addons/fs_file/readme/HISTORY.rst,sha256=jlF1DrdaQNoP_WAC45x1IngpLOMBFJPic50fbU_-mOA,2615
-odoo/addons/fs_file/readme/USAGE.rst,sha256=YZc2RSzZW3VXTtidOpdzGPVEuIR7sCsX523GtpJZ7Oo,3381
+odoo/addons/fs_file/readme/CONTRIBUTORS.md,sha256=8DFQm5QccZxE7XQlQbxTN6SIljgv9-eGEnp4hj0df5o,180
+odoo/addons/fs_file/readme/DESCRIPTION.md,sha256=PXzYOEti_HhxRtqdr0_zGm58Cybtox6hxcgS4z_beoA,317
+odoo/addons/fs_file/readme/HISTORY.md,sha256=Xju0XgXOpCOlcrk6-Q4fPN-hnSCNCGrNz-4o7W_y4v8,2521
+odoo/addons/fs_file/readme/USAGE.md,sha256=fqQPCCpn6Hsbns58koQ8fOQ9OUE2SCr_qyazdnWY3J0,3240
 odoo/addons/fs_file/readme/newsfragments/.gitignore,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 odoo/addons/fs_file/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/fs_file/static/description/index.html,sha256=ow8CWFmdofWp7ovdXp9LQPPmWcq3H2T4vGPfmLaY--8,29722
+odoo/addons/fs_file/static/description/index.html,sha256=B82RT8pKW-n73rBVooxLUR7ZQIzxYavuoYmVfEtEr9g,29878
 odoo/addons/fs_file/static/src/scss/fsfile_field.scss,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-odoo/addons/fs_file/static/src/views/fields/fsfile_field.esm.js,sha256=s7DbiZM5BOzoi42rqwT-nkbRICuQvECDG_xvy_4MAn8,2148
-odoo/addons/fs_file/static/src/views/fields/fsfile_field.xml,sha256=DVySfncTwtpoRbEcSYe2SCcxkgi_8N02ZwF8C8oYcDY,2009
+odoo/addons/fs_file/static/src/views/fields/fsfile_field.esm.js,sha256=uLoEHJ60Wn8zvwSgWKFu_XfsOB_XfGaZqTT16tsGKvo,1540
+odoo/addons/fs_file/static/src/views/fields/fsfile_field.xml,sha256=Iw0qlbeBxIOHpc46kjBmCZGq_8oWxvTPlVQIrKbGB84,2687
 odoo/addons/fs_file/tests/__init__.py,sha256=ZoYMFSj4BbhYtrotlnPjH_Ff2laBXMTQKOJ-4trR_yY,27
-odoo/addons/fs_file/tests/models.py,sha256=TygEsQ3VhjjqV2QPPPZOtrnFDgq3ubyWSzkdZT31ICE,288
+odoo/addons/fs_file/tests/models.py,sha256=f0wQIowOGc0_KP9QQ00vGSycYd6rD-g0d0Z_CzyaqSM,287
 odoo/addons/fs_file/tests/test_fs_file.py,sha256=JFtvsQYuZz05765APF6mnCmPxRVfhmVT_yi1z5AowXg,8063
-odoo_addon_fs_file-16.0.1.0.6.1.dist-info/METADATA,sha256=ay83lmKnifoP8Q1kY54wRBnt8BLmwENT32HEpTXj8FI,10232
-odoo_addon_fs_file-16.0.1.0.6.1.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-odoo_addon_fs_file-16.0.1.0.6.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_fs_file-16.0.1.0.6.1.dist-info/RECORD,,
+odoo_addon_fs_file-17.0.1.0.0.2.dist-info/METADATA,sha256=XHxqgJCszE9R0_hjmyAhU8sPQ67pdMQzEk5K0sJ-KVs,10406
+odoo_addon_fs_file-17.0.1.0.0.2.dist-info/WHEEL,sha256=8Rd4enx1PCuyDWP4SABqO5Fv8rpaknqp3VzjoFFLa6c,83
+odoo_addon_fs_file-17.0.1.0.0.2.dist-info/top_level.txt,sha256=QE6RBQ0QX5f4eFuUcGgU5Kbq1A_qJcDs-e_vpr6pmfU,4
+odoo_addon_fs_file-17.0.1.0.0.2.dist-info/RECORD,,
```

